<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Notepad ligero</title>
    <style>
        :root {
            --bg: #0d1117;
            --panel: #161b22;
            --text: #c9d1d9;
            --accent: #238636;
            --border: #30363d;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .toolbar {
            background-color: var(--panel);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border-bottom: 1px solid var(--border);
        }

        input[type="text"], button {
            background: #21262d;
            color: white;
            border: 1px solid var(--border);
            padding: 6px 10px;
            border-radius: 6px;
            outline: none;
        }

        input[type="text"]:focus { border-color: #58a6ff; }

        button { 
            cursor: pointer; 
            font-weight: bold;
            transition: 0.2s;
        }

        button:hover { background: #30363d; border-color: #8b949e; }
        .btn-save { background: var(--accent); border-color: rgba(240,246,252,0.1); }
        .btn-save:hover { background: #2ea043; }

        textarea {
            flex-grow: 1;
            background: var(--bg);
            color: #e6edf3;
            border: none;
            padding: 20px;
            font-size: 18px;
            font-family: 'Cascadia Code', 'Consolas', monospace;
            outline: none;
            resize: none;
        }

        .status-bar {
            background: var(--panel);
            font-size: 12px;
            padding: 5px 20px;
            color: #8b949e;
            border-top: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>
<body>

    <div class="toolbar">
        <button onclick="document.getElementById('fileOpener').click()">游늭 Abrir</button>
        <input type="file" id="fileOpener" style="display:none" onchange="cargarArchivo(this)">
        
        <div style="margin-left: auto; display: flex; align-items: center; gap: 8px;">
            <span>Extensi칩n:</span>
            <input type="text" id="extInput" value=".txt" style="width: 60px; text-align: center;" placeholder=".bat">
            
            <button class="btn-save" onclick="guardarArchivo()">游 Descargar</button>
        </div>
    </div>

    <textarea id="mainEditor" placeholder="Escribe aqu칤..."></textarea>

    <div class="status-bar">
        <span id="fileInfo">Archivo nuevo</span>
        <span id="autoSaveMsg">Sincronizado en local</span>
    </div>

    <script>
        const editor = document.getElementById('mainEditor');
        const extInput = document.getElementById('extInput');
        const fileInfo = document.getElementById('fileInfo');

        // Cargar lo 칰ltimo escrito al abrir la app
        window.onload = () => {
            editor.value = localStorage.getItem('custom_notepad_content') || "";
        };

        // Guardado autom치tico en el navegador
        editor.addEventListener('input', () => {
            localStorage.setItem('custom_notepad_content', editor.value);
        });

        // Abrir archivo existente
        function cargarArchivo(input) {
            const file = input.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                editor.value = e.target.result;
                fileInfo.innerText = "Editando: " + file.name;
                // Intentar extraer la extensi칩n autom치ticamente del archivo abierto
                const ext = file.name.substring(file.name.lastIndexOf('.'));
                if(ext) extInput.value = ext;
            };
            reader.readAsText(file);
        }

        // Descargar con extensi칩n personalizada
        function guardarArchivo() {
            const contenido = editor.value;
            const extension = extInput.value.startsWith('.') ? extInput.value : '.' + extInput.value;
            const nombreFinal = "archivo_creado" + extension;

            const blob = new Blob([contenido], { type: 'text/plain' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = nombreFinal;
            link.click();
            URL.revokeObjectURL(link.href);
        }
    </script>
</body>
</html>